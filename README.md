# Learning_Node

ğŸ¹ Node.js ğŸ¹

> Node.jsì˜ ë§¤ë ¥ì€ ë­˜ê¹Œ? ì˜ˆì „ C++ê°œë°œìì˜ ì €ìœ ë®¬ì²˜ëŸ¼ ìƒê°ë˜ì—ˆë˜ ê³ ì„±ëŠ¥ ì„œë²„ í”„ë¡œê·¸ë¨ ê°œë°œì˜ ë¬¸í„±ì„ íšê¸°ì ìœ¼ë¡œ ë‚®ì¶”ì—ˆë‹¤.
> ê·¸ ì™¸ì— NPMì„ í†µí•´ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ëª¨ë“ˆë“¤ ë•ë¶„ì— ì§§ì€ ì‹œê°„ ë¹¨ë¦¬ ì„±ì¥í•  ìˆ˜ ìˆì—ˆë‹¤.

# ëª©ì°¨

- [2021-11-05](./2021-11-05/README.md)
- [2021-11-06](./2021-11-06/README.md)
- [2021-11-08](./2021-11-08/README.md)
- [2021-11-09](./2021-11-09/README.md)
- [2021-11-10](./2021-11-10/README.md)
- [2021-11-11](./2021-11-11/README.md)
- [2021-11-12](./2021-11-12/README.md)
- [2021-11-15](./2021-11-15/README.md)
- [SNS-service](./SNS-service)

# í‰ë²”í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì•„ë‹ˆë‹¤.

- Nodeê°€ í´ë¼ì´ì–¸íŠ¸ ê°œë°œ ì‹œì— ì‚¬ìš©í–ˆë˜ ê²ƒê³¼ ê±°ì˜ ë™ì¼í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.
- NodeëŠ” ì„œë²„ ê¸°ìˆ ì´ë¯€ë¡œ, ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì˜ˆìƒí•  ìˆ˜ ìˆëŠ” ì¼ë¶€ ê¸°ëŠ¥ê³¼ ì•ˆì „ì°½ì¹˜ê°€ Nodeì—ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë°ë‹¤ ì™„ì „íˆ ìƒˆë¡­ê³  ìƒì†Œí•œ ê¸°ëŠ¥ë“¤ë„ ì¡´ì¬í•œë‹¤.

# ì™œ Nodeì¸ê°€?

NodeëŠ” ì…ì¶œë ¥ì€ ë§ì§€ë§Œ ì—°ì‚°ì€ ê°„ë‹¨í•œ ì—í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
ë”ìš± ì¤‘ìš”í•œ ì ì€ ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ë°”ë¡œ ì§ì ‘ ì œê³µí•œë‹¤ëŠ” ê²ƒì´ë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ íŒŒì¼ ë¡œë“œê°€ ì™„ë£Œë˜ê±°ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—…ë°ì´íŠ¸ë  ë•Œê¹Œì§€ ë‹¤ë¥¸ ì²˜ë¦¬ë¥¼ ì°¨ë‹¨í•˜ëŠ” ê²ƒì— ëŒ€í•´ ì—¼ë ¤í•œ í•„ìš”ê°€ ì—†ëŠ”ë°, ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ë“¤ì´ ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ë™ê¸°ì´ê¸° ë•Œë¬¸ì´ë‹¤.(ë¸”ë¡œí‚¹ í˜„ìƒì„ ë§‰ì•„ì¤€ë‹¤.) NodeëŠ” ë‹¨ì¼ ì“°ë ˆë“œë¡œ êµ¬í˜„ë˜ë¯€ë¡œ ì“°ë ˆë“œë¥¼ ë‹¤ë£¨ëŠ” ê²ƒì— ëŒ€í•´ì„œë„ ê±±ì •í•  í•„ìš”ê°€ ì—†ë‹¤.

**ë¹„ë™ê¸° ì²˜ë¦¬ë€?**

> ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì½”ë“œì˜ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ê¸° ì „ì— ì…ë ¥/ì¶œë ¥ í”„ë¡œì„¸ìŠ¤ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
> íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆë‹¤ê°€ í•´ë‹¹ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì ì ˆí•˜ê²Œ ì‘ë‹µí•œë‹¤.
> NodeëŠ” ì´ë²¤íŠ¸ ê¸°ëŠ¥ì´ ì™„ë£Œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ìš”ì²­ì´ ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ ì°¨ë‹¨í•˜ì§€ ì•Šìœ¼ë©°, ì´ë²¤íŠ¸ëŠ” ë¹„êµì  ê°„ë‹¨í•œ ì´ë²¤íŠ¸ ë£¨í”„ ë‚´ì—ì„œ ë“¤ì–´ì˜¨ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬ëœë‹¤.

# ì›¹ APIì„œë²„

APIì„œë²„ëŠ” í”„ë¡ íŠ¸ì—”ë“œì™€ ë¶„ë¦¬ë˜ì–´ ìš´ì˜ëœë‹¤.
APIë€ Application Programming Interfaceì˜ ì•½ì–´ë‹¤.
ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜„ì¬ í”„ë¡œê·¸ë¨ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í—ˆìš©í•˜ëŠ” ì ‘ì ì„ ì˜ë¯¸í•œë‹¤.

ì›¹ APIëŠ” ë‹¤ë¥¸ ì›¹ ì„œë¹„ìŠ¤ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ìì›ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ì°½êµ¬ì´ë‹¤.
APIë¥¼ ë§Œë“¤ì—ˆë‹¤ëŠ” ì˜ë¯¸ëŠ” ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì—ì„œ í˜„ì¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í—ˆìš©í•˜ì˜€ìŒì„ ì˜ë¯¸í•œë‹¤.

ì„œë²„ì— APIë¥¼ ì˜¬ë ¤ì„œ URLì„ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë§Œë“ ê²ƒì„ ì›¹ APIì„œë²„ë¼ê³  í•œë‹¤.

ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ê³µê°œí•´ë„ ë˜ëŠ” ì •ë³´ë“¤ì€ APIë¡œ ë§Œë“¤ì–´ APIë¥¼ í†µí•´ì„œ ê°€ì ¸ê°€ê²Œ í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤. (APIê°€ ì—†ì„ ê²½ìš°ì—ëŠ” í¬ë¡¤ë§ê°™ì€ ê¸°ë²•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°œì·Œí•´ì•¼ í•˜ëŠ”ë°, ì´ëŠ” íŠ¸ë˜í”½ ì¦ê°€ì˜ ì›ì¸ì´ëœë‹¤.)

# ì‹œí€„ë¼ì´ì¦ˆë¡œ í…Œì´ë¸”ê°„ ê´€ê³„ ì§€ì •í•˜ê¸°

## 1 : N

1 : N ê´€ê³„ì—ì„œëŠ” hasManyì™€ belongsToë¡œ ì—°ê²°í•œë‹¤.
ì´ë•Œ 1ì´ hasMany, Nì´ belongsToì´ë‹¤.
ê·¸ëŸ¬ë©´ ì‹œí€„ë¼ì´ì¦ˆëŠ” Nì¸ í…Œì´ë¸”ì— 1ì¸ í…Œì´ë¸”ì˜ primary key ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì¤€ë‹¤.

ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ User í…Œì´ë¸”ê³¼ Post í…Œì´ë¸”ì´ ìˆëŠ”ë°, Userê°€ 1, Postê°€ Nìœ¼ë¡œ ê´€ê³„ê°€ í˜•ì„±ëœë‹¤.
Postí…Œì´ë¸”ì—ëŠ” userIdì»¬ëŸ¼ì´ ì¶”ê°€ëœë‹¤.

## N : M

N : Mì˜ ê´€ê³„ëŠ” belongsToManyë©”ì„œë“œë¡œ ì •ì˜í•œë‹¤.
ê´€ê³„ íŠ¹ì„±ìƒ ì¤‘ê°„ í…Œì´ë¸”ì´ í•„ìš”í•˜ë‹¤. through ì†ì„±ì— í…Œì´ë¸”ì˜ ëª…ì„ ëª…ì‹œí•˜ë©´ ëœë‹¤.
ëŒ€í‘œì ì¸ ì˜ˆì‹œëŠ” Post, Hashtagê°€ ìˆë‹¤. ê²Œì‹œê¸€ì€ ì—¬ëŸ¬ í•´ì‹œí…Œê·¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê³ , í•´ì‹œí…Œê·¸ëŠ” ì—¬ëŸ¬ ê²Œì‹œê¸€ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

ìƒˆë¡œ ìƒì„±ëœ ì¤‘ê°„ í…Œì´ë¸”ì—ì„œëŠ” Nì˜ ê¸°ë³¸í‚¤, Nì˜ ê¸°ë³¸í‚¤ê°€ ì €ì¥ëœë‹¤.

ê°™ì€ í…Œì´ë¸”ë¼ë¦¬ì˜ N : Mê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ íŒ”ë¡œì‰, íŒ”ë¡œì›Œê°€ ìˆë‹¤.
ì‚¬ìš©ì í•œ ëª…ì´ íŒ”ë¡œì›Œë¥¼ ì—¬ëŸ¬ ëª… ê°€ì§ˆìˆ˜ë„ ìˆê³ , ì—¬ëŸ¬ ëª…ì„ íŒ”ë¡œì‰í•  ìˆ˜ë„ ìˆë‹¤.

ê°™ì€ í…Œì´ë¸”ê°„ì˜ N : M ê´€ê³„ì—ì„œëŠ” ëª¨ë¸ ì´ë¦„ê³¼ ì»¬ëŸ¼ì´ë¦„ì„ ë”°ë¡œ ì •í•´ì¤˜ì•¼ í•œë‹¤.
ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê°™ì€ í…Œì´ë¸”ì˜ ì´ë¦„ì´ ì¤‘ë³µëœ ì¤‘ê°„ í…Œì´ë¸”ì´ ìƒì„±ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
ë§Œì•½ Followë¼ëŠ” ì¤‘ê°„ í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤ê³  í–ˆì„ë•Œ followerId, followingId ë‘ ê°œì˜ ì»¬ëŸ¼ì´ ì¡´ì¬í•´ì•¼ í•œë‹¤.

# Passportë¡œ ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸°

```console
npm i passport passport-local passport-kakao bcrypt
```

Kakao ë¡œê·¸ì¸ ê¸°ëŠ¥ë„ ì¶”ê°€ë¡œ êµ¬í˜„í•´ë³´ê² ë‹¤.
app.jsì— ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.

```js
const passport = require("passport");

const passportConfig = require("./passport");

passportConfig(passport);

// ...Middlewares
app.use(passport.initialize());
app.use(passport.session());
```

passport ëª¨ë“ˆì€ ë‚˜ì¤‘ì— ì‘ì„±ì„ í• ê²ƒì´ë‹¤.
`app.use(passport.initialize());`ëŠ” ë¯¸ë“¤ì›¨ì–´ reqì— passport ì„¤ì •ì„ ì¶”ê°€í•˜ê³ , `app.use(passport.session());`ë¯¸ë“¤ì›¨ì–´ëŠ” req.sessionê°ì²´ì— passport ì •ë³´ë¥¼ ì¶”ê°€í•œë‹¤.
ì—¬ê¸°ì„œ ë¯¸ë“¤ì›¨ì–´ì˜ ìˆœì„œê°€ ì¤‘ìš”í•œë°, express-sessionì˜ ë¯¸ë“¤ì›¨ì–´ì˜ ë°‘ì— ìœ„ì¹˜í•´ì•¼ í•œë‹¤.

ì´ì œ Passport ëª¨ë“ˆì„ ì‘ì„±í•´ë³´ì

```js
// passport/index.js
const local = require("./localStrategy");
const kakao = require("./kakaoStrategy");
const { User } = require("../models");

module.exports = (passport) => {
  passport.serializeUser((user, done) => {
    done(null, user.id);
  });

  passport.deserializeUser((id, done) => {
    User.findOne({ where: { id } })
      .then((user) => done(null, user))
      .catch((error) => done(error));
  });

  local(passport);
  kakao(passport);
};
```

`passport.serializeUser`ì™€ `passport.deserializeUser`ëŠ” passportì˜ í•µì‹¬ì´ë‹¤.

`serializeUser`ëŠ” req.sessionê°ì²´ì— ì–´ë–¤ ë°ì´í„°ë¥¼ ì €ì¥í• ì§€ ì„ íƒí•œë‹¤. ë§¤ê°œë³€ìˆ˜ë¡œ userë¥¼ ë°›ì•„ì„œ doneí•¨ìˆ˜ì— ë‘ ë²ˆì§¸ ì¸ìë¡œ user.idë¥¼ ë„˜ê¸°ê³  ìˆëŠ”ë°, doneì¸ìì˜ ì²« ë²ˆì§¸ ì¸ìëŠ” ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ë˜ëŠ” ì¸ìë‹¤. ë‘ ë²ˆì§¸ ì¸ìê°€ ì¤‘ìš”í•˜ë‹¤.

ì„¸ì…˜ì— ì‚¬ìš©ì ì •ë³´ë¥¼ ëª¨ë‘ ì €ì¥í•˜ë©´ ìš©ëŸ‰ì´ ì»¤ì§€ëŠ” ë“±ì˜ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì¦‰, ì‚¬ìš©ìì˜ ì•„ì´ë””ë§Œ ì €ì¥í•´ì„œ ìš©ëŸ‰ì„ í™•ë³´í•˜ëŠ” passportì˜ ì „ëµì´ë‹¤.

`deserializeUser`ëŠ” ë§¤ ìš”ì²­ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë‹¤. passport.session() ë¯¸ë“¤ì›¨ì–´ê°€ ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ë°, serializeUserì—ì„œ ì €ì¥í–ˆë˜ ì•„ì´ë””ë¥¼ ë°›ì•„ì„œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì •ë³´ë¥¼ ì¡°íšŒí•œ í›„, req.userì— ì €ì¥í•œë‹¤.
ì•ìœ¼ë¡œ req.userì— userì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

ì•ìœ¼ë¡œ ì§„í–‰ë  ë¡œê·¸ì¸ í”Œë¡œìš°ë¥¼ ì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. ë¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì˜´
2. passport.authenticate ë©”ì„œë“œ í˜¸ì¶œ
3. ë¡œê·¸ì¸ ì „ëµ ìˆ˜í–‰
4. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì‚¬ìš©ì ì •ë³´ ê°ì²´ì™€ í•¨ê»˜ req.login í˜¸ì¶œ
5. req.loginë©”ì„œë“œê°€ passport.serializeUser í˜¸ì¶œ
6. req.sessionì— ì‚¬ìš©ì ì•„ì´ë””ë§Œ ì €ì¥
7. ë¡œê·¸ì¸ ì™„ë£Œ

## ë¡œì»¬ ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸°

passport-localì„ í†µí•´ì„œ ë¡œì»¬ ë¡œê·¸ì¸ì„ êµ¬í˜„í•œë‹¤.
ê·¸ ì „ì— ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ì ì ˆí•œ ì‘ë‹µì„ í•´ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.

```js
exports.isLoggedIn = (req, res, next) => {
  if (req.isAuthenticated()) {
    next();
  } else {
    res.status(403).send("ë¡œê·¸ì¸ í•„ìš”");
  }
};
exports.isNotLoggedIn = (req, res, next) => {
  if (!req.isAuthenticated()) {
    next();
  } else {
    res.redirect("/");
  }
};
```

Passportê°€ ì¶”ê°€í•´ì£¼ëŠ” isAuthenticatedë©”ì„œë“œë¡œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í–ˆëŠ”ì§€ ì•ˆí–ˆëŠ”ì§€ íŒë³„í•  ìˆ˜ ìˆë‹¤.

```js
router.get("/profile", isLoggedIn, (req, res) => {
  res.render("profile", {
    title: "ë‚´ ì •ë³´ - SNS",
    user: req.user, //? ì¶”í›„ì— userì •ë³´ë¥¼ ë„£ì„ ì˜ˆì •.
  });
});

router.get("/join", isNotLoggedIn, (req, res) => {
  res.render("join", {
    title: "íšŒì›ê°€ì… - SNS",
    user: req.user,
    joinError: req.flash("joinError"), //* ì¼íšŒì„± ë©”ì„¸ì§€
  });
});
```

ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ì•ì„œ ë§Œë“¤ì—ˆë˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì´ì œ auth ê´€ë ¨ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•˜ì.

```js
const express = require("express");
const passport = require("passport");
const { isLoggedIn, isNotLoggedIn } = require("./middlewares");
const bcrypt = require("bcrypt");

const router = express.Router();

router.post("/join", isNotLoggedIn, (req, res, next) => {});
router.post("/login", isNotLoggedIn, (req, res, next) => {});
router.get("/logout", isLoggedIn, (req, res, next) => {});

module.exports = router;
```

ë¼ìš°íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ì¡ê³  ê° ë¼ìš°íŠ¸ë¥¼ ê°œë°œí•´ë³´ë„ë¡ í•˜ê² ë‹¤.

```js
// join router
router.post("/join", isNotLoggedIn, (req, res, next) => {
  const { email, nick, password } = req.body;
  try {
    const exUser = await User.findOne({ where: { email } });
    if (exUser) {
      req.flash("joinError", "ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
      return res.redirect("/join");
    }
    const hash = await bcrypt.hash(password, 12);
    await User.create({
      email,
      nick,
      password: hash,
    });
    return res.redirect("/");
  } catch (error) {
    console.error(error);
    return next(error);
  }
});
```

íšŒì›ê°€ì… ë¼ìš°íŠ¸ëŠ” ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìœ ì €ë¼ë©´ User.createë¥¼ ì§„í–‰í•˜ì§€ ì•Šê³  flash ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•œë‹¤.
ì¡´ì¬í•˜ëŠ” ìœ ì €ê°€ ì•„ë‹ˆë¼ë©´ íšŒì›ê°€ì…ì„ ì§„í–‰í•˜ëŠ”ë°, ë¹„ë°€ë²ˆí˜¸ëŠ” ì•”í˜¸í™”ëœ ê°’ì„ ë„£ì–´ì¤€ë‹¤. `bcrypt.hash`ë©”ì„œë“œëŠ” ì²«ë²ˆì§¸ ì¸ìë¡œ ì•”í˜¸í™”í•  ê°’, ë‘ë²ˆì§¸ ì¸ìë¡œ ì•”í˜¸í™” ë°˜ë³µ íšŸìˆ˜ë¥¼ ì§€ì •í•œë‹¤. í¬ë©´ í´ìˆ˜ë¡ ë³µí˜¸í™”ê°€ ë³µì¡í•´ì§„ë‹¤.

```js
// login router
router.post("/login", isNotLoggedIn, (req, res, next) => {
  passport.authenticate("local", (authError, user, info) => {
    if (authError) {
      console.error(authError);
      return next(authError);
    }

    if (!user) {
      req.flash("loginError", info.message);
      return res.redirect("/");
    }
    return req.login(user, (loginError) => {
      if (loginError) {
        console.error(loginError);
        return next(loginError);
      }
      return res.redirect("/");
    });
  });
});
```

ë¡œê·¸ì¸ ë¼ìš°í„°ëŠ” `passport.authenticate`ê°€ ë¡œê·¸ì¸ ì „ëµì„ ì‹¤í–‰í•œë‹¤.
ë¡œê·¸ì¸ ì „ëµì€ ì•„ì§ ì‘ì„±í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë¡œê·¸ì•„ì›ƒ ë¼ìš°í„° ë‹¤ìŒì— ì‘ì„±í•´ë³´ë„ë¡ í•˜ê² ë‹¤.

```js
// logout router
router.get("/logout", isLoggedIn, (req, res, next) => {
  req.logout();
  req.session.destroy();
  req.redirect("/");
});
```

`req.logout();`ëŠ” req.userë¥¼ ì œê±°í•œë‹¤.ë‹¤ìŒ `req.session.destroy();`ëŠ” req.sessionì˜ ê°ì²´ë¥¼ ì œê±°í•œë‹¤.
